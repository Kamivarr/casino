generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           Int             @id @default(autoincrement())
  username     String          @unique
  email        String          @unique
  passwordHash String
  balance      Float           @default(100.0)
  createdAt    DateTime        @default(now())
  bets         Bet[]
  inventory    InventoryItem[] // Relacja do ekwipunku 
}

model Game {
  id        Int      @id @default(autoincrement())
  name      String
  type      String
  createdAt DateTime @default(now())
  bets      Bet[]
}

model Bet {
  id        Int      @id @default(autoincrement())
  amount    Float
  status    String
  createdAt DateTime @default(now())
  userId    Int
  gameId    Int
  user      User     @relation(fields: [userId], references: [id])
  game      Game     @relation(fields: [gameId], references: [id])
}

model Item {
  id        Int             @id @default(autoincrement())
  name      String
  price     Float
  rarity    String          // np: "common", "rare", "epic", "legendary"
  image     String?         // URL do obrazka
  cases     Case[]          @relation("CaseItems")
  inventory InventoryItem[] // Relacja do wystąpień w ekwipunku [cite: 1, 4]
}

model Case {
  id        Int      @id @default(autoincrement())
  name      String
  price     Float
  image     String?
  items     Item[]   @relation("CaseItems")
}

model InventoryItem {
  id        Int      @id @default(autoincrement())
  userId    Int
  itemId    Int
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])
  item      Item     @relation(fields: [itemId], references: [id])
}